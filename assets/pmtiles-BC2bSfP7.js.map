{"version":3,"file":"pmtiles-BC2bSfP7.js","sources":["../../node_modules/pmtiles/dist/index.js"],"sourcesContent":["var __pow = Math.pow;\nvar __async = (__this, __arguments, generator) => {\n  return new Promise((resolve, reject) => {\n    var fulfilled = (value) => {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var rejected = (value) => {\n      try {\n        step(generator.throw(value));\n      } catch (e) {\n        reject(e);\n      }\n    };\n    var step = (x) => x.done ? resolve(x.value) : Promise.resolve(x.value).then(fulfilled, rejected);\n    step((generator = generator.apply(__this, __arguments)).next());\n  });\n};\n\n// node_modules/fflate/esm/browser.js\nvar u8 = Uint8Array;\nvar u16 = Uint16Array;\nvar i32 = Int32Array;\nvar fleb = new u8([\n  0,\n  0,\n  0,\n  0,\n  0,\n  0,\n  0,\n  0,\n  1,\n  1,\n  1,\n  1,\n  2,\n  2,\n  2,\n  2,\n  3,\n  3,\n  3,\n  3,\n  4,\n  4,\n  4,\n  4,\n  5,\n  5,\n  5,\n  5,\n  0,\n  /* unused */\n  0,\n  0,\n  /* impossible */\n  0\n]);\nvar fdeb = new u8([\n  0,\n  0,\n  0,\n  0,\n  1,\n  1,\n  2,\n  2,\n  3,\n  3,\n  4,\n  4,\n  5,\n  5,\n  6,\n  6,\n  7,\n  7,\n  8,\n  8,\n  9,\n  9,\n  10,\n  10,\n  11,\n  11,\n  12,\n  12,\n  13,\n  13,\n  /* unused */\n  0,\n  0\n]);\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\nvar freb = function(eb, start) {\n  var b = new u16(31);\n  for (var i = 0; i < 31; ++i) {\n    b[i] = start += 1 << eb[i - 1];\n  }\n  var r = new i32(b[30]);\n  for (var i = 1; i < 30; ++i) {\n    for (var j = b[i]; j < b[i + 1]; ++j) {\n      r[j] = j - b[i] << 5 | i;\n    }\n  }\n  return { b, r };\n};\nvar _a = freb(fleb, 2);\nvar fl = _a.b;\nvar revfl = _a.r;\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0);\nvar fd = _b.b;\nvar revfd = _b.r;\nvar rev = new u16(32768);\nfor (i = 0; i < 32768; ++i) {\n  x = (i & 43690) >> 1 | (i & 21845) << 1;\n  x = (x & 52428) >> 2 | (x & 13107) << 2;\n  x = (x & 61680) >> 4 | (x & 3855) << 4;\n  rev[i] = ((x & 65280) >> 8 | (x & 255) << 8) >> 1;\n}\nvar x;\nvar i;\nvar hMap = function(cd, mb, r) {\n  var s = cd.length;\n  var i = 0;\n  var l = new u16(mb);\n  for (; i < s; ++i) {\n    if (cd[i])\n      ++l[cd[i] - 1];\n  }\n  var le = new u16(mb);\n  for (i = 1; i < mb; ++i) {\n    le[i] = le[i - 1] + l[i - 1] << 1;\n  }\n  var co;\n  if (r) {\n    co = new u16(1 << mb);\n    var rvb = 15 - mb;\n    for (i = 0; i < s; ++i) {\n      if (cd[i]) {\n        var sv = i << 4 | cd[i];\n        var r_1 = mb - cd[i];\n        var v = le[cd[i] - 1]++ << r_1;\n        for (var m = v | (1 << r_1) - 1; v <= m; ++v) {\n          co[rev[v] >> rvb] = sv;\n        }\n      }\n    }\n  } else {\n    co = new u16(s);\n    for (i = 0; i < s; ++i) {\n      if (cd[i]) {\n        co[i] = rev[le[cd[i] - 1]++] >> 15 - cd[i];\n      }\n    }\n  }\n  return co;\n};\nvar flt = new u8(288);\nfor (i = 0; i < 144; ++i)\n  flt[i] = 8;\nvar i;\nfor (i = 144; i < 256; ++i)\n  flt[i] = 9;\nvar i;\nfor (i = 256; i < 280; ++i)\n  flt[i] = 7;\nvar i;\nfor (i = 280; i < 288; ++i)\n  flt[i] = 8;\nvar i;\nvar fdt = new u8(32);\nfor (i = 0; i < 32; ++i)\n  fdt[i] = 5;\nvar i;\nvar flrm = /* @__PURE__ */ hMap(flt, 9, 1);\nvar fdrm = /* @__PURE__ */ hMap(fdt, 5, 1);\nvar max = function(a) {\n  var m = a[0];\n  for (var i = 1; i < a.length; ++i) {\n    if (a[i] > m)\n      m = a[i];\n  }\n  return m;\n};\nvar bits = function(d, p, m) {\n  var o = p / 8 | 0;\n  return (d[o] | d[o + 1] << 8) >> (p & 7) & m;\n};\nvar bits16 = function(d, p) {\n  var o = p / 8 | 0;\n  return (d[o] | d[o + 1] << 8 | d[o + 2] << 16) >> (p & 7);\n};\nvar shft = function(p) {\n  return (p + 7) / 8 | 0;\n};\nvar slc = function(v, s, e) {\n  if (s == null || s < 0)\n    s = 0;\n  if (e == null || e > v.length)\n    e = v.length;\n  var n = new u8(e - s);\n  n.set(v.subarray(s, e));\n  return n;\n};\nvar ec = [\n  \"unexpected EOF\",\n  \"invalid block type\",\n  \"invalid length/literal\",\n  \"invalid distance\",\n  \"stream finished\",\n  \"no stream handler\",\n  ,\n  \"no callback\",\n  \"invalid UTF-8 data\",\n  \"extra field too long\",\n  \"date not in range 1980-2099\",\n  \"filename too long\",\n  \"stream finishing\",\n  \"invalid zip data\"\n  // determined by unknown compression method\n];\nvar err = function(ind, msg, nt) {\n  var e = new Error(msg || ec[ind]);\n  e.code = ind;\n  if (Error.captureStackTrace)\n    Error.captureStackTrace(e, err);\n  if (!nt)\n    throw e;\n  return e;\n};\nvar inflt = function(dat, st, buf, dict) {\n  var sl = dat.length, dl = dict ? dict.length : 0;\n  if (!sl || st.f && !st.l)\n    return buf || new u8(0);\n  var noBuf = !buf || st.i != 2;\n  var noSt = st.i;\n  if (!buf)\n    buf = new u8(sl * 3);\n  var cbuf = function(l2) {\n    var bl = buf.length;\n    if (l2 > bl) {\n      var nbuf = new u8(Math.max(bl * 2, l2));\n      nbuf.set(buf);\n      buf = nbuf;\n    }\n  };\n  var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n  var tbts = sl * 8;\n  do {\n    if (!lm) {\n      final = bits(dat, pos, 1);\n      var type = bits(dat, pos + 1, 3);\n      pos += 3;\n      if (!type) {\n        var s = shft(pos) + 4, l = dat[s - 4] | dat[s - 3] << 8, t = s + l;\n        if (t > sl) {\n          if (noSt)\n            err(0);\n          break;\n        }\n        if (noBuf)\n          cbuf(bt + l);\n        buf.set(dat.subarray(s, t), bt);\n        st.b = bt += l, st.p = pos = t * 8, st.f = final;\n        continue;\n      } else if (type == 1)\n        lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n      else if (type == 2) {\n        var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n        var tl = hLit + bits(dat, pos + 5, 31) + 1;\n        pos += 14;\n        var ldt = new u8(tl);\n        var clt = new u8(19);\n        for (var i = 0; i < hcLen; ++i) {\n          clt[clim[i]] = bits(dat, pos + i * 3, 7);\n        }\n        pos += hcLen * 3;\n        var clb = max(clt), clbmsk = (1 << clb) - 1;\n        var clm = hMap(clt, clb, 1);\n        for (var i = 0; i < tl; ) {\n          var r = clm[bits(dat, pos, clbmsk)];\n          pos += r & 15;\n          var s = r >> 4;\n          if (s < 16) {\n            ldt[i++] = s;\n          } else {\n            var c = 0, n = 0;\n            if (s == 16)\n              n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n            else if (s == 17)\n              n = 3 + bits(dat, pos, 7), pos += 3;\n            else if (s == 18)\n              n = 11 + bits(dat, pos, 127), pos += 7;\n            while (n--)\n              ldt[i++] = c;\n          }\n        }\n        var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n        lbt = max(lt);\n        dbt = max(dt);\n        lm = hMap(lt, lbt, 1);\n        dm = hMap(dt, dbt, 1);\n      } else\n        err(1);\n      if (pos > tbts) {\n        if (noSt)\n          err(0);\n        break;\n      }\n    }\n    if (noBuf)\n      cbuf(bt + 131072);\n    var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n    var lpos = pos;\n    for (; ; lpos = pos) {\n      var c = lm[bits16(dat, pos) & lms], sym = c >> 4;\n      pos += c & 15;\n      if (pos > tbts) {\n        if (noSt)\n          err(0);\n        break;\n      }\n      if (!c)\n        err(2);\n      if (sym < 256)\n        buf[bt++] = sym;\n      else if (sym == 256) {\n        lpos = pos, lm = null;\n        break;\n      } else {\n        var add = sym - 254;\n        if (sym > 264) {\n          var i = sym - 257, b = fleb[i];\n          add = bits(dat, pos, (1 << b) - 1) + fl[i];\n          pos += b;\n        }\n        var d = dm[bits16(dat, pos) & dms], dsym = d >> 4;\n        if (!d)\n          err(3);\n        pos += d & 15;\n        var dt = fd[dsym];\n        if (dsym > 3) {\n          var b = fdeb[dsym];\n          dt += bits16(dat, pos) & (1 << b) - 1, pos += b;\n        }\n        if (pos > tbts) {\n          if (noSt)\n            err(0);\n          break;\n        }\n        if (noBuf)\n          cbuf(bt + 131072);\n        var end = bt + add;\n        if (bt < dt) {\n          var shift2 = dl - dt, dend = Math.min(dt, end);\n          if (shift2 + bt < 0)\n            err(3);\n          for (; bt < dend; ++bt)\n            buf[bt] = dict[shift2 + bt];\n        }\n        for (; bt < end; bt += 4) {\n          buf[bt] = buf[bt - dt];\n          buf[bt + 1] = buf[bt + 1 - dt];\n          buf[bt + 2] = buf[bt + 2 - dt];\n          buf[bt + 3] = buf[bt + 3 - dt];\n        }\n        bt = end;\n      }\n    }\n    st.l = lm, st.p = lpos, st.b = bt, st.f = final;\n    if (lm)\n      final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n  } while (!final);\n  return bt == buf.length ? buf : slc(buf, 0, bt);\n};\nvar et = /* @__PURE__ */ new u8(0);\nvar gzs = function(d) {\n  if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n    err(6, \"invalid gzip data\");\n  var flg = d[3];\n  var st = 10;\n  if (flg & 4)\n    st += (d[10] | d[11] << 8) + 2;\n  for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n    ;\n  return st + (flg & 2);\n};\nvar gzl = function(d) {\n  var l = d.length;\n  return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16 | d[l - 1] << 24) >>> 0;\n};\nvar zls = function(d, dict) {\n  if ((d[0] & 15) != 8 || d[0] >> 4 > 7 || (d[0] << 8 | d[1]) % 31)\n    err(6, \"invalid zlib data\");\n  if ((d[1] >> 5 & 1) == +!dict)\n    err(6, \"invalid zlib data: \" + (d[1] & 32 ? \"need\" : \"unexpected\") + \" dictionary\");\n  return (d[1] >> 3 & 4) + 2;\n};\nfunction inflateSync(data, opts) {\n  return inflt(data, { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\nfunction gunzipSync(data, opts) {\n  var st = gzs(data);\n  if (st + 8 > data.length)\n    err(6, \"invalid gzip data\");\n  return inflt(data.subarray(st, -8), { i: 2 }, opts && opts.out || new u8(gzl(data)), opts && opts.dictionary);\n}\nfunction unzlibSync(data, opts) {\n  return inflt(data.subarray(zls(data, opts && opts.dictionary), -4), { i: 2 }, opts && opts.out, opts && opts.dictionary);\n}\nfunction decompressSync(data, opts) {\n  return data[0] == 31 && data[1] == 139 && data[2] == 8 ? gunzipSync(data, opts) : (data[0] & 15) != 8 || data[0] >> 4 > 7 || (data[0] << 8 | data[1]) % 31 ? inflateSync(data, opts) : unzlibSync(data, opts);\n}\nvar td = typeof TextDecoder != \"undefined\" && /* @__PURE__ */ new TextDecoder();\nvar tds = 0;\ntry {\n  td.decode(et, { stream: true });\n  tds = 1;\n} catch (e) {\n}\n\n// v2.ts\nvar shift = (n, shift2) => {\n  return n * __pow(2, shift2);\n};\nvar unshift = (n, shift2) => {\n  return Math.floor(n / __pow(2, shift2));\n};\nvar getUint24 = (view, pos) => {\n  return shift(view.getUint16(pos + 1, true), 8) + view.getUint8(pos);\n};\nvar getUint48 = (view, pos) => {\n  return shift(view.getUint32(pos + 2, true), 16) + view.getUint16(pos, true);\n};\nvar compare = (tz, tx, ty, view, i) => {\n  if (tz !== view.getUint8(i))\n    return tz - view.getUint8(i);\n  const x = getUint24(view, i + 1);\n  if (tx !== x)\n    return tx - x;\n  const y = getUint24(view, i + 4);\n  if (ty !== y)\n    return ty - y;\n  return 0;\n};\nvar queryLeafdir = (view, z, x, y) => {\n  const offsetLen = queryView(view, z | 128, x, y);\n  if (offsetLen) {\n    return {\n      z,\n      x,\n      y,\n      offset: offsetLen[0],\n      length: offsetLen[1],\n      isDir: true\n    };\n  }\n  return null;\n};\nvar queryTile = (view, z, x, y) => {\n  const offsetLen = queryView(view, z, x, y);\n  if (offsetLen) {\n    return {\n      z,\n      x,\n      y,\n      offset: offsetLen[0],\n      length: offsetLen[1],\n      isDir: false\n    };\n  }\n  return null;\n};\nvar queryView = (view, z, x, y) => {\n  let m = 0;\n  let n = view.byteLength / 17 - 1;\n  while (m <= n) {\n    const k = n + m >> 1;\n    const cmp = compare(z, x, y, view, k * 17);\n    if (cmp > 0) {\n      m = k + 1;\n    } else if (cmp < 0) {\n      n = k - 1;\n    } else {\n      return [getUint48(view, k * 17 + 7), view.getUint32(k * 17 + 13, true)];\n    }\n  }\n  return null;\n};\nvar entrySort = (a, b) => {\n  if (a.isDir && !b.isDir) {\n    return 1;\n  }\n  if (!a.isDir && b.isDir) {\n    return -1;\n  }\n  if (a.z !== b.z) {\n    return a.z - b.z;\n  }\n  if (a.x !== b.x) {\n    return a.x - b.x;\n  }\n  return a.y - b.y;\n};\nvar parseEntry = (dataview, i) => {\n  const zRaw = dataview.getUint8(i * 17);\n  const z = zRaw & 127;\n  return {\n    z,\n    x: getUint24(dataview, i * 17 + 1),\n    y: getUint24(dataview, i * 17 + 4),\n    offset: getUint48(dataview, i * 17 + 7),\n    length: dataview.getUint32(i * 17 + 13, true),\n    isDir: zRaw >> 7 === 1\n  };\n};\nvar sortDir = (a) => {\n  const entries = [];\n  const view = new DataView(a);\n  for (let i = 0; i < view.byteLength / 17; i++) {\n    entries.push(parseEntry(view, i));\n  }\n  return createDirectory(entries);\n};\nvar createDirectory = (entries) => {\n  entries.sort(entrySort);\n  const buffer = new ArrayBuffer(17 * entries.length);\n  const arr = new Uint8Array(buffer);\n  for (let i = 0; i < entries.length; i++) {\n    const entry = entries[i];\n    let z = entry.z;\n    if (entry.isDir)\n      z = z | 128;\n    arr[i * 17] = z;\n    arr[i * 17 + 1] = entry.x & 255;\n    arr[i * 17 + 2] = entry.x >> 8 & 255;\n    arr[i * 17 + 3] = entry.x >> 16 & 255;\n    arr[i * 17 + 4] = entry.y & 255;\n    arr[i * 17 + 5] = entry.y >> 8 & 255;\n    arr[i * 17 + 6] = entry.y >> 16 & 255;\n    arr[i * 17 + 7] = entry.offset & 255;\n    arr[i * 17 + 8] = unshift(entry.offset, 8) & 255;\n    arr[i * 17 + 9] = unshift(entry.offset, 16) & 255;\n    arr[i * 17 + 10] = unshift(entry.offset, 24) & 255;\n    arr[i * 17 + 11] = unshift(entry.offset, 32) & 255;\n    arr[i * 17 + 12] = unshift(entry.offset, 48) & 255;\n    arr[i * 17 + 13] = entry.length & 255;\n    arr[i * 17 + 14] = entry.length >> 8 & 255;\n    arr[i * 17 + 15] = entry.length >> 16 & 255;\n    arr[i * 17 + 16] = entry.length >> 24 & 255;\n  }\n  return buffer;\n};\nvar deriveLeaf = (view, tile) => {\n  if (view.byteLength < 17)\n    return null;\n  const numEntries = view.byteLength / 17;\n  const entry = parseEntry(view, numEntries - 1);\n  if (entry.isDir) {\n    const leafLevel = entry.z;\n    const levelDiff = tile.z - leafLevel;\n    const leafX = Math.trunc(tile.x / (1 << levelDiff));\n    const leafY = Math.trunc(tile.y / (1 << levelDiff));\n    return { z: leafLevel, x: leafX, y: leafY };\n  }\n  return null;\n};\nfunction getHeader(source) {\n  return __async(this, null, function* () {\n    const resp = yield source.getBytes(0, 512e3);\n    const dataview = new DataView(resp.data);\n    const jsonSize = dataview.getUint32(4, true);\n    const rootEntries = dataview.getUint16(8, true);\n    const dec = new TextDecoder(\"utf-8\");\n    const jsonMetadata = JSON.parse(\n      dec.decode(new DataView(resp.data, 10, jsonSize))\n    );\n    let tileCompression = 0 /* Unknown */;\n    if (jsonMetadata.compression === \"gzip\") {\n      tileCompression = 2 /* Gzip */;\n    }\n    let minzoom = 0;\n    if (\"minzoom\" in jsonMetadata) {\n      minzoom = +jsonMetadata.minzoom;\n    }\n    let maxzoom = 0;\n    if (\"maxzoom\" in jsonMetadata) {\n      maxzoom = +jsonMetadata.maxzoom;\n    }\n    let centerLon = 0;\n    let centerLat = 0;\n    let centerZoom = 0;\n    let minLon = -180;\n    let minLat = -85;\n    let maxLon = 180;\n    let maxLat = 85;\n    if (jsonMetadata.bounds) {\n      const split = jsonMetadata.bounds.split(\",\");\n      minLon = +split[0];\n      minLat = +split[1];\n      maxLon = +split[2];\n      maxLat = +split[3];\n    }\n    if (jsonMetadata.center) {\n      const split = jsonMetadata.center.split(\",\");\n      centerLon = +split[0];\n      centerLat = +split[1];\n      centerZoom = +split[2];\n    }\n    const header = {\n      specVersion: dataview.getUint16(2, true),\n      rootDirectoryOffset: 10 + jsonSize,\n      rootDirectoryLength: rootEntries * 17,\n      jsonMetadataOffset: 10,\n      jsonMetadataLength: jsonSize,\n      leafDirectoryOffset: 0,\n      leafDirectoryLength: void 0,\n      tileDataOffset: 0,\n      tileDataLength: void 0,\n      numAddressedTiles: 0,\n      numTileEntries: 0,\n      numTileContents: 0,\n      clustered: false,\n      internalCompression: 1 /* None */,\n      tileCompression,\n      tileType: 1 /* Mvt */,\n      minZoom: minzoom,\n      maxZoom: maxzoom,\n      minLon,\n      minLat,\n      maxLon,\n      maxLat,\n      centerZoom,\n      centerLon,\n      centerLat,\n      etag: resp.etag\n    };\n    return header;\n  });\n}\nfunction getZxy(header, source, cache, z, x, y, signal) {\n  return __async(this, null, function* () {\n    let rootDir = yield cache.getArrayBuffer(\n      source,\n      header.rootDirectoryOffset,\n      header.rootDirectoryLength,\n      header\n    );\n    if (header.specVersion === 1) {\n      rootDir = sortDir(rootDir);\n    }\n    const entry = queryTile(new DataView(rootDir), z, x, y);\n    if (entry) {\n      const resp = yield source.getBytes(entry.offset, entry.length, signal);\n      let tileData = resp.data;\n      const view = new DataView(tileData);\n      if (view.getUint8(0) === 31 && view.getUint8(1) === 139) {\n        tileData = decompressSync(new Uint8Array(tileData));\n      }\n      return {\n        data: tileData\n      };\n    }\n    const leafcoords = deriveLeaf(new DataView(rootDir), { z, x, y });\n    if (leafcoords) {\n      const leafdirEntry = queryLeafdir(\n        new DataView(rootDir),\n        leafcoords.z,\n        leafcoords.x,\n        leafcoords.y\n      );\n      if (leafdirEntry) {\n        let leafDir = yield cache.getArrayBuffer(\n          source,\n          leafdirEntry.offset,\n          leafdirEntry.length,\n          header\n        );\n        if (header.specVersion === 1) {\n          leafDir = sortDir(leafDir);\n        }\n        const tileEntry = queryTile(new DataView(leafDir), z, x, y);\n        if (tileEntry) {\n          const resp = yield source.getBytes(\n            tileEntry.offset,\n            tileEntry.length,\n            signal\n          );\n          let tileData = resp.data;\n          const view = new DataView(tileData);\n          if (view.getUint8(0) === 31 && view.getUint8(1) === 139) {\n            tileData = decompressSync(new Uint8Array(tileData));\n          }\n          return {\n            data: tileData\n          };\n        }\n      }\n    }\n    return void 0;\n  });\n}\nvar v2_default = {\n  getHeader,\n  getZxy\n};\n\n// adapters.ts\nvar leafletRasterLayer = (source, options) => {\n  let loaded = false;\n  let mimeType = \"\";\n  const cls = L.GridLayer.extend({\n    createTile: (coord, done) => {\n      const el = document.createElement(\"img\");\n      const controller = new AbortController();\n      const signal = controller.signal;\n      el.cancel = () => {\n        controller.abort();\n      };\n      if (!loaded) {\n        source.getHeader().then((header) => {\n          if (header.tileType === 1 /* Mvt */) {\n            console.error(\n              \"Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details.\"\n            );\n          } else if (header.tileType === 2) {\n            mimeType = \"image/png\";\n          } else if (header.tileType === 3) {\n            mimeType = \"image/jpeg\";\n          } else if (header.tileType === 4) {\n            mimeType = \"image/webp\";\n          } else if (header.tileType === 5) {\n            mimeType = \"image/avif\";\n          }\n        });\n        loaded = true;\n      }\n      source.getZxy(coord.z, coord.x, coord.y, signal).then((arr) => {\n        if (arr) {\n          const blob = new Blob([arr.data], { type: mimeType });\n          const imageUrl = window.URL.createObjectURL(blob);\n          el.src = imageUrl;\n          el.cancel = void 0;\n          done(void 0, el);\n        }\n      }).catch((e) => {\n        if (e.name !== \"AbortError\") {\n          throw e;\n        }\n      });\n      return el;\n    },\n    _removeTile: function(key) {\n      const tile = this._tiles[key];\n      if (!tile) {\n        return;\n      }\n      if (tile.el.cancel)\n        tile.el.cancel();\n      tile.el.width = 0;\n      tile.el.height = 0;\n      tile.el.deleted = true;\n      L.DomUtil.remove(tile.el);\n      delete this._tiles[key];\n      this.fire(\"tileunload\", {\n        tile: tile.el,\n        coords: this._keyToTileCoords(key)\n      });\n    }\n  });\n  return new cls(options);\n};\nvar v3compat = (v4) => (requestParameters, arg2) => {\n  if (arg2 instanceof AbortController) {\n    return v4(requestParameters, arg2);\n  }\n  const abortController = new AbortController();\n  v4(requestParameters, abortController).then(\n    (result) => {\n      return arg2(\n        void 0,\n        result.data,\n        result.cacheControl || \"\",\n        result.expires || \"\"\n      );\n    },\n    (err2) => {\n      return arg2(err2);\n    }\n  ).catch((e) => {\n    return arg2(e);\n  });\n  return { cancel: () => abortController.abort() };\n};\nvar Protocol = class {\n  /**\n   * Initialize the MapLibre PMTiles protocol.\n   *\n   * * metadata: also load the metadata section of the PMTiles. required for some \"inspect\" functionality\n   * and to automatically populate the map attribution. Requires an extra HTTP request.\n   */\n  constructor(options) {\n    /** @hidden */\n    this.tilev4 = (params, abortController) => __async(this, null, function* () {\n      if (params.type === \"json\") {\n        const pmtilesUrl2 = params.url.substr(10);\n        let instance2 = this.tiles.get(pmtilesUrl2);\n        if (!instance2) {\n          instance2 = new PMTiles(pmtilesUrl2);\n          this.tiles.set(pmtilesUrl2, instance2);\n        }\n        if (this.metadata) {\n          return {\n            data: yield instance2.getTileJson(params.url)\n          };\n        }\n        const h = yield instance2.getHeader();\n        return {\n          data: {\n            tiles: [`${params.url}/{z}/{x}/{y}`],\n            minzoom: h.minZoom,\n            maxzoom: h.maxZoom,\n            bounds: [h.minLon, h.minLat, h.maxLon, h.maxLat]\n          }\n        };\n      }\n      const re = new RegExp(/pmtiles:\\/\\/(.+)\\/(\\d+)\\/(\\d+)\\/(\\d+)/);\n      const result = params.url.match(re);\n      if (!result) {\n        throw new Error(\"Invalid PMTiles protocol URL\");\n      }\n      const pmtilesUrl = result[1];\n      let instance = this.tiles.get(pmtilesUrl);\n      if (!instance) {\n        instance = new PMTiles(pmtilesUrl);\n        this.tiles.set(pmtilesUrl, instance);\n      }\n      const z = result[2];\n      const x = result[3];\n      const y = result[4];\n      const header = yield instance.getHeader();\n      const resp = yield instance == null ? void 0 : instance.getZxy(+z, +x, +y, abortController.signal);\n      if (resp) {\n        return {\n          data: new Uint8Array(resp.data),\n          cacheControl: resp.cacheControl,\n          expires: resp.expires\n        };\n      }\n      if (header.tileType === 1 /* Mvt */) {\n        return { data: new Uint8Array() };\n      }\n      return { data: null };\n    });\n    this.tile = v3compat(this.tilev4);\n    this.tiles = /* @__PURE__ */ new Map();\n    this.metadata = (options == null ? void 0 : options.metadata) || false;\n  }\n  /**\n   * Add a {@link PMTiles} instance to the global protocol instance.\n   *\n   * For remote fetch sources, references in MapLibre styles like pmtiles://http://...\n   * will resolve to the same instance if the URLs match.\n   */\n  add(p) {\n    this.tiles.set(p.source.getKey(), p);\n  }\n  /**\n   * Fetch a {@link PMTiles} instance by URL, for remote PMTiles instances.\n   */\n  get(url) {\n    return this.tiles.get(url);\n  }\n};\n\n// index.ts\nfunction toNum(low, high) {\n  return (high >>> 0) * 4294967296 + (low >>> 0);\n}\nfunction readVarintRemainder(l, p) {\n  const buf = p.buf;\n  let b = buf[p.pos++];\n  let h = (b & 112) >> 4;\n  if (b < 128)\n    return toNum(l, h);\n  b = buf[p.pos++];\n  h |= (b & 127) << 3;\n  if (b < 128)\n    return toNum(l, h);\n  b = buf[p.pos++];\n  h |= (b & 127) << 10;\n  if (b < 128)\n    return toNum(l, h);\n  b = buf[p.pos++];\n  h |= (b & 127) << 17;\n  if (b < 128)\n    return toNum(l, h);\n  b = buf[p.pos++];\n  h |= (b & 127) << 24;\n  if (b < 128)\n    return toNum(l, h);\n  b = buf[p.pos++];\n  h |= (b & 1) << 31;\n  if (b < 128)\n    return toNum(l, h);\n  throw new Error(\"Expected varint not more than 10 bytes\");\n}\nfunction readVarint(p) {\n  const buf = p.buf;\n  let b = buf[p.pos++];\n  let val = b & 127;\n  if (b < 128)\n    return val;\n  b = buf[p.pos++];\n  val |= (b & 127) << 7;\n  if (b < 128)\n    return val;\n  b = buf[p.pos++];\n  val |= (b & 127) << 14;\n  if (b < 128)\n    return val;\n  b = buf[p.pos++];\n  val |= (b & 127) << 21;\n  if (b < 128)\n    return val;\n  b = buf[p.pos];\n  val |= (b & 15) << 28;\n  return readVarintRemainder(val, p);\n}\nfunction rotate(n, xy, rx, ry) {\n  if (ry === 0) {\n    if (rx === 1) {\n      xy[0] = n - 1 - xy[0];\n      xy[1] = n - 1 - xy[1];\n    }\n    const t = xy[0];\n    xy[0] = xy[1];\n    xy[1] = t;\n  }\n}\nfunction idOnLevel(z, pos) {\n  const n = __pow(2, z);\n  let rx = pos;\n  let ry = pos;\n  let t = pos;\n  const xy = [0, 0];\n  let s = 1;\n  while (s < n) {\n    rx = 1 & t / 2;\n    ry = 1 & (t ^ rx);\n    rotate(s, xy, rx, ry);\n    xy[0] += s * rx;\n    xy[1] += s * ry;\n    t = t / 4;\n    s *= 2;\n  }\n  return [z, xy[0], xy[1]];\n}\nvar tzValues = [\n  0,\n  1,\n  5,\n  21,\n  85,\n  341,\n  1365,\n  5461,\n  21845,\n  87381,\n  349525,\n  1398101,\n  5592405,\n  22369621,\n  89478485,\n  357913941,\n  1431655765,\n  5726623061,\n  22906492245,\n  91625968981,\n  366503875925,\n  1466015503701,\n  5864062014805,\n  23456248059221,\n  93824992236885,\n  375299968947541,\n  1501199875790165\n];\nfunction zxyToTileId(z, x, y) {\n  if (z > 26) {\n    throw Error(\"Tile zoom level exceeds max safe number limit (26)\");\n  }\n  if (x > __pow(2, z) - 1 || y > __pow(2, z) - 1) {\n    throw Error(\"tile x/y outside zoom level bounds\");\n  }\n  const acc = tzValues[z];\n  const n = __pow(2, z);\n  let rx = 0;\n  let ry = 0;\n  let d = 0;\n  const xy = [x, y];\n  let s = n / 2;\n  while (s > 0) {\n    rx = (xy[0] & s) > 0 ? 1 : 0;\n    ry = (xy[1] & s) > 0 ? 1 : 0;\n    d += s * s * (3 * rx ^ ry);\n    rotate(s, xy, rx, ry);\n    s = s / 2;\n  }\n  return acc + d;\n}\nfunction tileIdToZxy(i) {\n  let acc = 0;\n  const z = 0;\n  for (let z2 = 0; z2 < 27; z2++) {\n    const numTiles = (1 << z2) * (1 << z2);\n    if (acc + numTiles > i) {\n      return idOnLevel(z2, i - acc);\n    }\n    acc += numTiles;\n  }\n  throw Error(\"Tile zoom level exceeds max safe number limit (26)\");\n}\nvar Compression = /* @__PURE__ */ ((Compression2) => {\n  Compression2[Compression2[\"Unknown\"] = 0] = \"Unknown\";\n  Compression2[Compression2[\"None\"] = 1] = \"None\";\n  Compression2[Compression2[\"Gzip\"] = 2] = \"Gzip\";\n  Compression2[Compression2[\"Brotli\"] = 3] = \"Brotli\";\n  Compression2[Compression2[\"Zstd\"] = 4] = \"Zstd\";\n  return Compression2;\n})(Compression || {});\nfunction defaultDecompress(buf, compression) {\n  return __async(this, null, function* () {\n    if (compression === 1 /* None */ || compression === 0 /* Unknown */) {\n      return buf;\n    }\n    if (compression === 2 /* Gzip */) {\n      if (typeof globalThis.DecompressionStream === \"undefined\") {\n        return decompressSync(new Uint8Array(buf));\n      }\n      const stream = new Response(buf).body;\n      if (!stream) {\n        throw Error(\"Failed to read response stream\");\n      }\n      const result = stream.pipeThrough(\n        // biome-ignore lint: needed to detect DecompressionStream in browser+node+cloudflare workers\n        new globalThis.DecompressionStream(\"gzip\")\n      );\n      return new Response(result).arrayBuffer();\n    }\n    throw Error(\"Compression method not supported\");\n  });\n}\nvar TileType = /* @__PURE__ */ ((TileType2) => {\n  TileType2[TileType2[\"Unknown\"] = 0] = \"Unknown\";\n  TileType2[TileType2[\"Mvt\"] = 1] = \"Mvt\";\n  TileType2[TileType2[\"Png\"] = 2] = \"Png\";\n  TileType2[TileType2[\"Jpeg\"] = 3] = \"Jpeg\";\n  TileType2[TileType2[\"Webp\"] = 4] = \"Webp\";\n  TileType2[TileType2[\"Avif\"] = 5] = \"Avif\";\n  return TileType2;\n})(TileType || {});\nfunction tileTypeExt(t) {\n  if (t === 1 /* Mvt */)\n    return \".mvt\";\n  if (t === 2 /* Png */)\n    return \".png\";\n  if (t === 3 /* Jpeg */)\n    return \".jpg\";\n  if (t === 4 /* Webp */)\n    return \".webp\";\n  if (t === 5 /* Avif */)\n    return \".avif\";\n  return \"\";\n}\nvar HEADER_SIZE_BYTES = 127;\nfunction findTile(entries, tileId) {\n  let m = 0;\n  let n = entries.length - 1;\n  while (m <= n) {\n    const k = n + m >> 1;\n    const cmp = tileId - entries[k].tileId;\n    if (cmp > 0) {\n      m = k + 1;\n    } else if (cmp < 0) {\n      n = k - 1;\n    } else {\n      return entries[k];\n    }\n  }\n  if (n >= 0) {\n    if (entries[n].runLength === 0) {\n      return entries[n];\n    }\n    if (tileId - entries[n].tileId < entries[n].runLength) {\n      return entries[n];\n    }\n  }\n  return null;\n}\nvar FileSource = class {\n  constructor(file) {\n    this.file = file;\n  }\n  getKey() {\n    return this.file.name;\n  }\n  getBytes(offset, length) {\n    return __async(this, null, function* () {\n      const blob = this.file.slice(offset, offset + length);\n      const a = yield blob.arrayBuffer();\n      return { data: a };\n    });\n  }\n};\nvar FetchSource = class {\n  constructor(url, customHeaders = new Headers()) {\n    this.url = url;\n    this.customHeaders = customHeaders;\n    this.mustReload = false;\n    let userAgent = \"\";\n    if (\"navigator\" in globalThis) {\n      userAgent = globalThis.navigator.userAgent || \"\";\n    }\n    const isWindows = userAgent.indexOf(\"Windows\") > -1;\n    const isChromiumBased = /Chrome|Chromium|Edg|OPR|Brave/.test(userAgent);\n    this.chromeWindowsNoCache = false;\n    if (isWindows && isChromiumBased) {\n      this.chromeWindowsNoCache = true;\n    }\n  }\n  getKey() {\n    return this.url;\n  }\n  /**\n   * Mutate the custom [Headers](https://developer.mozilla.org/en-US/docs/Web/API/Headers) set for all requests to the remote archive.\n   */\n  setHeaders(customHeaders) {\n    this.customHeaders = customHeaders;\n  }\n  getBytes(offset, length, passedSignal, etag) {\n    return __async(this, null, function* () {\n      let controller;\n      let signal;\n      if (passedSignal) {\n        signal = passedSignal;\n      } else {\n        controller = new AbortController();\n        signal = controller.signal;\n      }\n      const requestHeaders = new Headers(this.customHeaders);\n      requestHeaders.set(\"range\", `bytes=${offset}-${offset + length - 1}`);\n      let cache;\n      if (this.mustReload) {\n        cache = \"reload\";\n      } else if (this.chromeWindowsNoCache) {\n        cache = \"no-store\";\n      }\n      let resp = yield fetch(this.url, {\n        signal,\n        cache,\n        headers: requestHeaders\n        //biome-ignore lint: \"cache\" is incompatible between cloudflare workers and browser\n      });\n      if (offset === 0 && resp.status === 416) {\n        const contentRange = resp.headers.get(\"Content-Range\");\n        if (!contentRange || !contentRange.startsWith(\"bytes */\")) {\n          throw Error(\"Missing content-length on 416 response\");\n        }\n        const actualLength = +contentRange.substr(8);\n        resp = yield fetch(this.url, {\n          signal,\n          cache: \"reload\",\n          headers: { range: `bytes=0-${actualLength - 1}` }\n          //biome-ignore lint: \"cache\" is incompatible between cloudflare workers and browser\n        });\n      }\n      let newEtag = resp.headers.get(\"Etag\");\n      if (newEtag == null ? void 0 : newEtag.startsWith(\"W/\")) {\n        newEtag = null;\n      }\n      if (resp.status === 416 || etag && newEtag && newEtag !== etag) {\n        this.mustReload = true;\n        throw new EtagMismatch(\n          `Server returned non-matching ETag ${etag} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`\n        );\n      }\n      if (resp.status >= 300) {\n        throw Error(`Bad response code: ${resp.status}`);\n      }\n      const contentLength = resp.headers.get(\"Content-Length\");\n      if (resp.status === 200 && (!contentLength || +contentLength > length)) {\n        if (controller)\n          controller.abort();\n        throw Error(\n          \"Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.\"\n        );\n      }\n      const a = yield resp.arrayBuffer();\n      return {\n        data: a,\n        etag: newEtag || void 0,\n        cacheControl: resp.headers.get(\"Cache-Control\") || void 0,\n        expires: resp.headers.get(\"Expires\") || void 0\n      };\n    });\n  }\n};\nfunction getUint64(v, offset) {\n  const wh = v.getUint32(offset + 4, true);\n  const wl = v.getUint32(offset + 0, true);\n  return wh * __pow(2, 32) + wl;\n}\nfunction bytesToHeader(bytes, etag) {\n  const v = new DataView(bytes);\n  const specVersion = v.getUint8(7);\n  if (specVersion > 3) {\n    throw Error(\n      `Archive is spec version ${specVersion} but this library supports up to spec version 3`\n    );\n  }\n  return {\n    specVersion,\n    rootDirectoryOffset: getUint64(v, 8),\n    rootDirectoryLength: getUint64(v, 16),\n    jsonMetadataOffset: getUint64(v, 24),\n    jsonMetadataLength: getUint64(v, 32),\n    leafDirectoryOffset: getUint64(v, 40),\n    leafDirectoryLength: getUint64(v, 48),\n    tileDataOffset: getUint64(v, 56),\n    tileDataLength: getUint64(v, 64),\n    numAddressedTiles: getUint64(v, 72),\n    numTileEntries: getUint64(v, 80),\n    numTileContents: getUint64(v, 88),\n    clustered: v.getUint8(96) === 1,\n    internalCompression: v.getUint8(97),\n    tileCompression: v.getUint8(98),\n    tileType: v.getUint8(99),\n    minZoom: v.getUint8(100),\n    maxZoom: v.getUint8(101),\n    minLon: v.getInt32(102, true) / 1e7,\n    minLat: v.getInt32(106, true) / 1e7,\n    maxLon: v.getInt32(110, true) / 1e7,\n    maxLat: v.getInt32(114, true) / 1e7,\n    centerZoom: v.getUint8(118),\n    centerLon: v.getInt32(119, true) / 1e7,\n    centerLat: v.getInt32(123, true) / 1e7,\n    etag\n  };\n}\nfunction deserializeIndex(buffer) {\n  const p = { buf: new Uint8Array(buffer), pos: 0 };\n  const numEntries = readVarint(p);\n  const entries = [];\n  let lastId = 0;\n  for (let i = 0; i < numEntries; i++) {\n    const v = readVarint(p);\n    entries.push({ tileId: lastId + v, offset: 0, length: 0, runLength: 1 });\n    lastId += v;\n  }\n  for (let i = 0; i < numEntries; i++) {\n    entries[i].runLength = readVarint(p);\n  }\n  for (let i = 0; i < numEntries; i++) {\n    entries[i].length = readVarint(p);\n  }\n  for (let i = 0; i < numEntries; i++) {\n    const v = readVarint(p);\n    if (v === 0 && i > 0) {\n      entries[i].offset = entries[i - 1].offset + entries[i - 1].length;\n    } else {\n      entries[i].offset = v - 1;\n    }\n  }\n  return entries;\n}\nfunction detectVersion(a) {\n  const v = new DataView(a);\n  if (v.getUint16(2, true) === 2) {\n    console.warn(\n      \"PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade\"\n    );\n    return 2;\n  }\n  if (v.getUint16(2, true) === 1) {\n    console.warn(\n      \"PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade\"\n    );\n    return 1;\n  }\n  return 3;\n}\nvar EtagMismatch = class extends Error {\n};\nfunction getHeaderAndRoot(source, decompress) {\n  return __async(this, null, function* () {\n    const resp = yield source.getBytes(0, 16384);\n    const v = new DataView(resp.data);\n    if (v.getUint16(0, true) !== 19792) {\n      throw new Error(\"Wrong magic number for PMTiles archive\");\n    }\n    if (detectVersion(resp.data) < 3) {\n      return [yield v2_default.getHeader(source)];\n    }\n    const headerData = resp.data.slice(0, HEADER_SIZE_BYTES);\n    const header = bytesToHeader(headerData, resp.etag);\n    const rootDirData = resp.data.slice(\n      header.rootDirectoryOffset,\n      header.rootDirectoryOffset + header.rootDirectoryLength\n    );\n    const dirKey = `${source.getKey()}|${header.etag || \"\"}|${header.rootDirectoryOffset}|${header.rootDirectoryLength}`;\n    const rootDir = deserializeIndex(\n      yield decompress(rootDirData, header.internalCompression)\n    );\n    return [header, [dirKey, rootDir.length, rootDir]];\n  });\n}\nfunction getDirectory(source, decompress, offset, length, header) {\n  return __async(this, null, function* () {\n    const resp = yield source.getBytes(offset, length, void 0, header.etag);\n    const data = yield decompress(resp.data, header.internalCompression);\n    const directory = deserializeIndex(data);\n    if (directory.length === 0) {\n      throw new Error(\"Empty directory is invalid\");\n    }\n    return directory;\n  });\n}\nvar ResolvedValueCache = class {\n  constructor(maxCacheEntries = 100, prefetch = true, decompress = defaultDecompress) {\n    this.cache = /* @__PURE__ */ new Map();\n    this.maxCacheEntries = maxCacheEntries;\n    this.counter = 1;\n    this.decompress = decompress;\n  }\n  getHeader(source) {\n    return __async(this, null, function* () {\n      const cacheKey = source.getKey();\n      const cacheValue = this.cache.get(cacheKey);\n      if (cacheValue) {\n        cacheValue.lastUsed = this.counter++;\n        const data = cacheValue.data;\n        return data;\n      }\n      const res = yield getHeaderAndRoot(source, this.decompress);\n      if (res[1]) {\n        this.cache.set(res[1][0], {\n          lastUsed: this.counter++,\n          data: res[1][2]\n        });\n      }\n      this.cache.set(cacheKey, {\n        lastUsed: this.counter++,\n        data: res[0]\n      });\n      this.prune();\n      return res[0];\n    });\n  }\n  getDirectory(source, offset, length, header) {\n    return __async(this, null, function* () {\n      const cacheKey = `${source.getKey()}|${header.etag || \"\"}|${offset}|${length}`;\n      const cacheValue = this.cache.get(cacheKey);\n      if (cacheValue) {\n        cacheValue.lastUsed = this.counter++;\n        const data = cacheValue.data;\n        return data;\n      }\n      const directory = yield getDirectory(\n        source,\n        this.decompress,\n        offset,\n        length,\n        header\n      );\n      this.cache.set(cacheKey, {\n        lastUsed: this.counter++,\n        data: directory\n      });\n      this.prune();\n      return directory;\n    });\n  }\n  // for v2 backwards compatibility\n  getArrayBuffer(source, offset, length, header) {\n    return __async(this, null, function* () {\n      const cacheKey = `${source.getKey()}|${header.etag || \"\"}|${offset}|${length}`;\n      const cacheValue = this.cache.get(cacheKey);\n      if (cacheValue) {\n        cacheValue.lastUsed = this.counter++;\n        const data = yield cacheValue.data;\n        return data;\n      }\n      const resp = yield source.getBytes(offset, length, void 0, header.etag);\n      this.cache.set(cacheKey, {\n        lastUsed: this.counter++,\n        data: resp.data\n      });\n      this.prune();\n      return resp.data;\n    });\n  }\n  prune() {\n    if (this.cache.size > this.maxCacheEntries) {\n      let minUsed = Infinity;\n      let minKey = void 0;\n      this.cache.forEach((cacheValue, key) => {\n        if (cacheValue.lastUsed < minUsed) {\n          minUsed = cacheValue.lastUsed;\n          minKey = key;\n        }\n      });\n      if (minKey) {\n        this.cache.delete(minKey);\n      }\n    }\n  }\n  invalidate(source) {\n    return __async(this, null, function* () {\n      this.cache.delete(source.getKey());\n    });\n  }\n};\nvar SharedPromiseCache = class {\n  constructor(maxCacheEntries = 100, prefetch = true, decompress = defaultDecompress) {\n    this.cache = /* @__PURE__ */ new Map();\n    this.invalidations = /* @__PURE__ */ new Map();\n    this.maxCacheEntries = maxCacheEntries;\n    this.counter = 1;\n    this.decompress = decompress;\n  }\n  getHeader(source) {\n    return __async(this, null, function* () {\n      const cacheKey = source.getKey();\n      const cacheValue = this.cache.get(cacheKey);\n      if (cacheValue) {\n        cacheValue.lastUsed = this.counter++;\n        const data = yield cacheValue.data;\n        return data;\n      }\n      const p = new Promise((resolve, reject) => {\n        getHeaderAndRoot(source, this.decompress).then((res) => {\n          if (res[1]) {\n            this.cache.set(res[1][0], {\n              lastUsed: this.counter++,\n              data: Promise.resolve(res[1][2])\n            });\n          }\n          resolve(res[0]);\n          this.prune();\n        }).catch((e) => {\n          reject(e);\n        });\n      });\n      this.cache.set(cacheKey, { lastUsed: this.counter++, data: p });\n      return p;\n    });\n  }\n  getDirectory(source, offset, length, header) {\n    return __async(this, null, function* () {\n      const cacheKey = `${source.getKey()}|${header.etag || \"\"}|${offset}|${length}`;\n      const cacheValue = this.cache.get(cacheKey);\n      if (cacheValue) {\n        cacheValue.lastUsed = this.counter++;\n        const data = yield cacheValue.data;\n        return data;\n      }\n      const p = new Promise((resolve, reject) => {\n        getDirectory(source, this.decompress, offset, length, header).then((directory) => {\n          resolve(directory);\n          this.prune();\n        }).catch((e) => {\n          reject(e);\n        });\n      });\n      this.cache.set(cacheKey, { lastUsed: this.counter++, data: p });\n      return p;\n    });\n  }\n  // for v2 backwards compatibility\n  getArrayBuffer(source, offset, length, header) {\n    return __async(this, null, function* () {\n      const cacheKey = `${source.getKey()}|${header.etag || \"\"}|${offset}|${length}`;\n      const cacheValue = this.cache.get(cacheKey);\n      if (cacheValue) {\n        cacheValue.lastUsed = this.counter++;\n        const data = yield cacheValue.data;\n        return data;\n      }\n      const p = new Promise((resolve, reject) => {\n        source.getBytes(offset, length, void 0, header.etag).then((resp) => {\n          resolve(resp.data);\n          if (this.cache.has(cacheKey)) {\n          }\n          this.prune();\n        }).catch((e) => {\n          reject(e);\n        });\n      });\n      this.cache.set(cacheKey, { lastUsed: this.counter++, data: p });\n      return p;\n    });\n  }\n  prune() {\n    if (this.cache.size >= this.maxCacheEntries) {\n      let minUsed = Infinity;\n      let minKey = void 0;\n      this.cache.forEach((cacheValue, key) => {\n        if (cacheValue.lastUsed < minUsed) {\n          minUsed = cacheValue.lastUsed;\n          minKey = key;\n        }\n      });\n      if (minKey) {\n        this.cache.delete(minKey);\n      }\n    }\n  }\n  invalidate(source) {\n    return __async(this, null, function* () {\n      const key = source.getKey();\n      if (this.invalidations.get(key)) {\n        return yield this.invalidations.get(key);\n      }\n      this.cache.delete(source.getKey());\n      const p = new Promise((resolve, reject) => {\n        this.getHeader(source).then((h) => {\n          resolve();\n          this.invalidations.delete(key);\n        }).catch((e) => {\n          reject(e);\n        });\n      });\n      this.invalidations.set(key, p);\n    });\n  }\n};\nvar PMTiles = class {\n  constructor(source, cache, decompress) {\n    if (typeof source === \"string\") {\n      this.source = new FetchSource(source);\n    } else {\n      this.source = source;\n    }\n    if (decompress) {\n      this.decompress = decompress;\n    } else {\n      this.decompress = defaultDecompress;\n    }\n    if (cache) {\n      this.cache = cache;\n    } else {\n      this.cache = new SharedPromiseCache();\n    }\n  }\n  /**\n   * Return the header of the archive,\n   * including information such as tile type, min/max zoom, bounds, and summary statistics.\n   */\n  getHeader() {\n    return __async(this, null, function* () {\n      return yield this.cache.getHeader(this.source);\n    });\n  }\n  /** @hidden */\n  getZxyAttempt(z, x, y, signal) {\n    return __async(this, null, function* () {\n      const tileId = zxyToTileId(z, x, y);\n      const header = yield this.cache.getHeader(this.source);\n      if (header.specVersion < 3) {\n        return v2_default.getZxy(header, this.source, this.cache, z, x, y, signal);\n      }\n      if (z < header.minZoom || z > header.maxZoom) {\n        return void 0;\n      }\n      let dO = header.rootDirectoryOffset;\n      let dL = header.rootDirectoryLength;\n      for (let depth = 0; depth <= 3; depth++) {\n        const directory = yield this.cache.getDirectory(\n          this.source,\n          dO,\n          dL,\n          header\n        );\n        const entry = findTile(directory, tileId);\n        if (entry) {\n          if (entry.runLength > 0) {\n            const resp = yield this.source.getBytes(\n              header.tileDataOffset + entry.offset,\n              entry.length,\n              signal,\n              header.etag\n            );\n            return {\n              data: yield this.decompress(resp.data, header.tileCompression),\n              cacheControl: resp.cacheControl,\n              expires: resp.expires\n            };\n          }\n          dO = header.leafDirectoryOffset + entry.offset;\n          dL = entry.length;\n        } else {\n          return void 0;\n        }\n      }\n      throw Error(\"Maximum directory depth exceeded\");\n    });\n  }\n  /**\n   * Primary method to get a single tile's bytes from an archive.\n   *\n   * Returns undefined if the tile does not exist in the archive.\n   */\n  getZxy(z, x, y, signal) {\n    return __async(this, null, function* () {\n      try {\n        return yield this.getZxyAttempt(z, x, y, signal);\n      } catch (e) {\n        if (e instanceof EtagMismatch) {\n          this.cache.invalidate(this.source);\n          return yield this.getZxyAttempt(z, x, y, signal);\n        }\n        throw e;\n      }\n    });\n  }\n  /** @hidden */\n  getMetadataAttempt() {\n    return __async(this, null, function* () {\n      const header = yield this.cache.getHeader(this.source);\n      const resp = yield this.source.getBytes(\n        header.jsonMetadataOffset,\n        header.jsonMetadataLength,\n        void 0,\n        header.etag\n      );\n      const decompressed = yield this.decompress(\n        resp.data,\n        header.internalCompression\n      );\n      const dec = new TextDecoder(\"utf-8\");\n      return JSON.parse(dec.decode(decompressed));\n    });\n  }\n  /**\n   * Return the arbitrary JSON metadata of the archive.\n   */\n  getMetadata() {\n    return __async(this, null, function* () {\n      try {\n        return yield this.getMetadataAttempt();\n      } catch (e) {\n        if (e instanceof EtagMismatch) {\n          this.cache.invalidate(this.source);\n          return yield this.getMetadataAttempt();\n        }\n        throw e;\n      }\n    });\n  }\n  /**\n   * Construct a [TileJSON](https://github.com/mapbox/tilejson-spec) object.\n   *\n   * baseTilesUrl is the desired tiles URL, excluding the suffix `/{z}/{x}/{y}.{ext}`.\n   * For example, if the desired URL is `http://example.com/tileset/{z}/{x}/{y}.mvt`,\n   * the baseTilesUrl should be `https://example.com/tileset`.\n   */\n  getTileJson(baseTilesUrl) {\n    return __async(this, null, function* () {\n      const header = yield this.getHeader();\n      const metadata = yield this.getMetadata();\n      const ext = tileTypeExt(header.tileType);\n      return {\n        tilejson: \"3.0.0\",\n        scheme: \"xyz\",\n        tiles: [`${baseTilesUrl}/{z}/{x}/{y}${ext}`],\n        // biome-ignore lint: TileJSON spec\n        vector_layers: metadata.vector_layers,\n        attribution: metadata.attribution,\n        description: metadata.description,\n        name: metadata.name,\n        version: metadata.version,\n        bounds: [header.minLon, header.minLat, header.maxLon, header.maxLat],\n        center: [header.centerLon, header.centerLat, header.centerZoom],\n        minzoom: header.minZoom,\n        maxzoom: header.maxZoom\n      };\n    });\n  }\n};\nexport {\n  Compression,\n  EtagMismatch,\n  FetchSource,\n  FileSource,\n  PMTiles,\n  Protocol,\n  ResolvedValueCache,\n  SharedPromiseCache,\n  TileType,\n  bytesToHeader,\n  findTile,\n  getUint64,\n  leafletRasterLayer,\n  readVarint,\n  tileIdToZxy,\n  tileTypeExt,\n  zxyToTileId\n};\n"],"names":["__pow","__async","__this","__arguments","generator","resolve","reject","fulfilled","value","step","e","rejected","x","u8","u16","i32","fleb","fdeb","clim","freb","eb","start","b","i","r","j","_a","fl","revfl","_b","fd","rev","hMap","cd","mb","s","l","le","co","rvb","sv","r_1","v","m","flt","fdt","flrm","fdrm","max","a","bits","d","p","o","bits16","shft","slc","ec","err","ind","msg","nt","inflt","dat","st","buf","dict","sl","dl","noBuf","noSt","cbuf","l2","bl","nbuf","final","pos","bt","lm","dm","lbt","dbt","tbts","type","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","c","n","lt","dt","t","lms","dms","lpos","sym","add","dsym","end","shift2","dend","et","gzs","flg","zs","gzl","zls","inflateSync","data","opts","gunzipSync","unzlibSync","decompressSync","td","tds","shift","unshift","getUint24","view","getUint48","compare","tz","tx","ty","y","queryLeafdir","z","offsetLen","queryView","queryTile","k","cmp","entrySort","parseEntry","dataview","zRaw","sortDir","entries","createDirectory","buffer","arr","entry","deriveLeaf","tile","numEntries","leafLevel","levelDiff","leafX","leafY","getHeader","source","resp","jsonSize","rootEntries","dec","jsonMetadata","tileCompression","minzoom","maxzoom","centerLon","centerLat","centerZoom","minLon","minLat","maxLon","maxLat","split","getZxy","header","cache","signal","rootDir","tileData","leafcoords","leafdirEntry","leafDir","tileEntry","v2_default","v3compat","v4","requestParameters","arg2","abortController","result","err2","Protocol","options","params","pmtilesUrl2","instance2","PMTiles","h","re","pmtilesUrl","instance","url","toNum","low","high","readVarintRemainder","readVarint","val","rotate","xy","rx","ry","tzValues","zxyToTileId","acc","defaultDecompress","compression","stream","tileTypeExt","HEADER_SIZE_BYTES","findTile","tileId","FetchSource","customHeaders","userAgent","isWindows","isChromiumBased","offset","length","passedSignal","etag","controller","requestHeaders","contentRange","actualLength","newEtag","EtagMismatch","contentLength","getUint64","wh","wl","bytesToHeader","bytes","specVersion","deserializeIndex","lastId","detectVersion","getHeaderAndRoot","decompress","headerData","rootDirData","dirKey","getDirectory","directory","SharedPromiseCache","maxCacheEntries","prefetch","cacheKey","cacheValue","res","minUsed","minKey","key","dO","dL","depth","decompressed","baseTilesUrl","metadata","ext"],"mappings":"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","x_google_ignoreList":[0]}